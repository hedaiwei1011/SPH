{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reqCartList, reqDeleteCart, reqUpdateChecked } from '@/api';\nconst state = {\n  cartList: []\n};\nconst mutations = {\n  GETCARTLIST(state, cartList) {\n    state.cartList = cartList;\n  }\n};\nconst actions = {\n  async getCartList({\n    commit\n  }) {\n    let result = await reqCartList();\n    //console.log(result)\n    if (result.code == 200) {\n      commit('GETCARTLIST', result.data);\n    }\n  },\n  //删除购物车某一个产品\n  async deleteCartListBySkuId({\n    commit\n  }, skuId) {\n    let result = await reqDeleteCart(skuId);\n    //console.log(result)\n    if (result.code == 200) {\n      return 'ok';\n    } else {\n      //代表删除失败\n      return Promise.reject(new Error('faile'));\n    }\n  },\n  //修改某一个商品勾选状态\n  async changeChecked({\n    commit\n  }, {\n    skuId,\n    isChecked\n  }) {\n    let result = await reqUpdateChecked(skuId, isChecked);\n    //console.log(result)\n    if (result.code == 200) {\n      return 'ok';\n    } else {\n      return Promise.reject();\n    }\n  },\n  //删除全部勾选的产品\n  deleteAllCheckedCart({\n    dispatch,\n    getters\n  }) {\n    //console.log(context)\n    //context 就是一个小仓库包含commit【提交mutations修改state】、dispatch、getters、state\n    //console.log(getters.cartList.cartInfoList)\n    let PromiseAll = [];\n    getters.cartList.cartInfoList.forEach(item => {\n      let promise = item.isChecked == 1 ? dispatch('deleteCartListBySkuId', item.skuId) : '';\n      //将每一次返回的promise添加到数组当中\n      PromiseAll.push(promise);\n    });\n    //如果有一个失败 返回就是失败\n    return Promise.all(PromiseAll);\n  },\n  //修改全部产品状态\n  updateAllCartIsChecked({\n    dispatch,\n    state\n  }, isChecked) {\n    /* console.log(state)\n    console.log(isChecked) */\n    console.log(state.cartList.cartInfoList);\n    /* let promiseAll = []\n    state.cartList.cartInfoList.forEach((item) => {\n      let promise = dispatch('changeChecked', {\n        skuId: item.skuId,\n        isChecked,\n      })\n      promiseAll.push(promise)\n    })\n    return Promise.all(promiseAll) */\n  }\n};\n\nconst getters = {\n  cartList(state) {\n    return state.cartList[0] || {};\n  }\n  /* cartInfoList(state){\n    return state.\n  } */\n};\n\nexport default {\n  state,\n  mutations,\n  actions,\n  getters\n};","map":{"version":3,"names":["reqCartList","reqDeleteCart","reqUpdateChecked","state","cartList","mutations","GETCARTLIST","actions","getCartList","commit","result","code","data","deleteCartListBySkuId","skuId","Promise","reject","Error","changeChecked","isChecked","deleteAllCheckedCart","dispatch","getters","PromiseAll","cartInfoList","forEach","item","promise","push","all","updateAllCartIsChecked","console","log"],"sources":["/Users/hedaiwei/Desktop/project-SPH/app/src/store/shopcart/index.js"],"sourcesContent":["import { reqCartList, reqDeleteCart, reqUpdateChecked } from '@/api'\n\nconst state = {\n  cartList: [],\n}\nconst mutations = {\n  GETCARTLIST(state, cartList) {\n    state.cartList = cartList\n  },\n}\nconst actions = {\n  async getCartList({ commit }) {\n    let result = await reqCartList()\n    //console.log(result)\n    if (result.code == 200) {\n      commit('GETCARTLIST', result.data)\n    }\n  },\n  //删除购物车某一个产品\n  async deleteCartListBySkuId({ commit }, skuId) {\n    let result = await reqDeleteCart(skuId)\n    //console.log(result)\n    if (result.code == 200) {\n      return 'ok'\n    } else {\n      //代表删除失败\n      return Promise.reject(new Error('faile'))\n    }\n  },\n  //修改某一个商品勾选状态\n  async changeChecked({ commit }, { skuId, isChecked }) {\n    let result = await reqUpdateChecked(skuId, isChecked)\n    //console.log(result)\n    if (result.code == 200) {\n      return 'ok'\n    } else {\n      return Promise.reject()\n    }\n  },\n  //删除全部勾选的产品\n  deleteAllCheckedCart({ dispatch, getters }) {\n    //console.log(context)\n    //context 就是一个小仓库包含commit【提交mutations修改state】、dispatch、getters、state\n    //console.log(getters.cartList.cartInfoList)\n    let PromiseAll = []\n    getters.cartList.cartInfoList.forEach((item) => {\n      let promise =\n        item.isChecked == 1 ? dispatch('deleteCartListBySkuId', item.skuId) : ''\n      //将每一次返回的promise添加到数组当中\n      PromiseAll.push(promise)\n    })\n    //如果有一个失败 返回就是失败\n    return Promise.all(PromiseAll)\n  },\n  //修改全部产品状态\n  updateAllCartIsChecked({ dispatch, state }, isChecked) {\n    /* console.log(state)\n    console.log(isChecked) */\n    console.log(state.cartList.cartInfoList)\n    /* let promiseAll = []\n    state.cartList.cartInfoList.forEach((item) => {\n      let promise = dispatch('changeChecked', {\n        skuId: item.skuId,\n        isChecked,\n      })\n      promiseAll.push(promise)\n    })\n    return Promise.all(promiseAll) */\n  },\n}\nconst getters = {\n  cartList(state) {\n    return state.cartList[0] || {}\n  },\n  /* cartInfoList(state){\n    return state.\n  } */\n}\n\nexport default {\n  state,\n  mutations,\n  actions,\n  getters,\n}\n"],"mappings":";AAAA,SAASA,WAAW,EAAEC,aAAa,EAAEC,gBAAgB,QAAQ,OAAO;AAEpE,MAAMC,KAAK,GAAG;EACZC,QAAQ,EAAE;AACZ,CAAC;AACD,MAAMC,SAAS,GAAG;EAChBC,WAAWA,CAACH,KAAK,EAAEC,QAAQ,EAAE;IAC3BD,KAAK,CAACC,QAAQ,GAAGA,QAAQ;EAC3B;AACF,CAAC;AACD,MAAMG,OAAO,GAAG;EACd,MAAMC,WAAWA,CAAC;IAAEC;EAAO,CAAC,EAAE;IAC5B,IAAIC,MAAM,GAAG,MAAMV,WAAW,CAAC,CAAC;IAChC;IACA,IAAIU,MAAM,CAACC,IAAI,IAAI,GAAG,EAAE;MACtBF,MAAM,CAAC,aAAa,EAAEC,MAAM,CAACE,IAAI,CAAC;IACpC;EACF,CAAC;EACD;EACA,MAAMC,qBAAqBA,CAAC;IAAEJ;EAAO,CAAC,EAAEK,KAAK,EAAE;IAC7C,IAAIJ,MAAM,GAAG,MAAMT,aAAa,CAACa,KAAK,CAAC;IACvC;IACA,IAAIJ,MAAM,CAACC,IAAI,IAAI,GAAG,EAAE;MACtB,OAAO,IAAI;IACb,CAAC,MAAM;MACL;MACA,OAAOI,OAAO,CAACC,MAAM,CAAC,IAAIC,KAAK,CAAC,OAAO,CAAC,CAAC;IAC3C;EACF,CAAC;EACD;EACA,MAAMC,aAAaA,CAAC;IAAET;EAAO,CAAC,EAAE;IAAEK,KAAK;IAAEK;EAAU,CAAC,EAAE;IACpD,IAAIT,MAAM,GAAG,MAAMR,gBAAgB,CAACY,KAAK,EAAEK,SAAS,CAAC;IACrD;IACA,IAAIT,MAAM,CAACC,IAAI,IAAI,GAAG,EAAE;MACtB,OAAO,IAAI;IACb,CAAC,MAAM;MACL,OAAOI,OAAO,CAACC,MAAM,CAAC,CAAC;IACzB;EACF,CAAC;EACD;EACAI,oBAAoBA,CAAC;IAAEC,QAAQ;IAAEC;EAAQ,CAAC,EAAE;IAC1C;IACA;IACA;IACA,IAAIC,UAAU,GAAG,EAAE;IACnBD,OAAO,CAAClB,QAAQ,CAACoB,YAAY,CAACC,OAAO,CAAEC,IAAI,IAAK;MAC9C,IAAIC,OAAO,GACTD,IAAI,CAACP,SAAS,IAAI,CAAC,GAAGE,QAAQ,CAAC,uBAAuB,EAAEK,IAAI,CAACZ,KAAK,CAAC,GAAG,EAAE;MAC1E;MACAS,UAAU,CAACK,IAAI,CAACD,OAAO,CAAC;IAC1B,CAAC,CAAC;IACF;IACA,OAAOZ,OAAO,CAACc,GAAG,CAACN,UAAU,CAAC;EAChC,CAAC;EACD;EACAO,sBAAsBA,CAAC;IAAET,QAAQ;IAAElB;EAAM,CAAC,EAAEgB,SAAS,EAAE;IACrD;AACJ;IACIY,OAAO,CAACC,GAAG,CAAC7B,KAAK,CAACC,QAAQ,CAACoB,YAAY,CAAC;IACxC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE;AACF,CAAC;;AACD,MAAMF,OAAO,GAAG;EACdlB,QAAQA,CAACD,KAAK,EAAE;IACd,OAAOA,KAAK,CAACC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;EAChC;EACA;AACF;AACA;AACA,CAAC;;AAED,eAAe;EACbD,KAAK;EACLE,SAAS;EACTE,OAAO;EACPe;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}