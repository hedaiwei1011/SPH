{"ast":null,"code":"//配置路由的地方\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport routes from './routes';\n//引入store\nimport store from '@/store';\n//作为插件\nVue.use(VueRouter);\n\n//先把VueRouter原型对象的push 先保存一份\nlet originPush = VueRouter.prototype.push;\nlet originReplace = VueRouter.prototype.replace;\n\n//重写push｜replace\nVueRouter.prototype.push = function (location, resolve, reject) {\n  if (resolve && reject) {\n    originPush.call(this, location, resolve, reject);\n  } else {\n    originPush.call(this, location, () => {}, () => {});\n  }\n};\nVueRouter.prototype.replace = function (location, resolve, reject) {\n  if (resolve && reject) {\n    originReplace.call(this, location, resolve, reject);\n  } else {\n    originReplace.call(this, location, () => {}, () => {});\n  }\n};\n\n//配置路由\nlet router = new VueRouter({\n  //配置路由\n  routes,\n  scrollBehavior(to, from, savedPosition) {\n    // return 期望滚动到哪个的位置\n    //代表滚动条在最上方\n    return {\n      y: 0\n    };\n  }\n});\n\n//全局守卫 前置守卫 在路由跳转之间进行判断\nrouter.beforeEach((to, from, next) => {\n  //to 可以获取到你要跳到哪的信息\n  //from 获取到你从哪个路由而来的信息\n  //next 放行函数\n  //next()\n  //用户登录了，才会有token，未登录一定不会有token\n  let token = store.state.user.token;\n  if (token) {\n    //用户已经登录了还想去login\n    if (to.path == '/login') {\n      next('/home');\n    } else {\n      //登陆了去的不是login\n      next();\n    }\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","routes","store","use","originPush","prototype","push","originReplace","replace","location","resolve","reject","call","router","scrollBehavior","to","from","savedPosition","y","beforeEach","next","token","state","user","path"],"sources":["/Users/hedaiwei/Desktop/project-SPH/app/src/router/index.js"],"sourcesContent":["//配置路由的地方\nimport Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport routes from './routes'\n//引入store\nimport store from '@/store'\n//作为插件\nVue.use(VueRouter)\n\n//先把VueRouter原型对象的push 先保存一份\nlet originPush = VueRouter.prototype.push\nlet originReplace = VueRouter.prototype.replace\n\n//重写push｜replace\nVueRouter.prototype.push = function (location, resolve, reject) {\n  if (resolve && reject) {\n    originPush.call(this, location, resolve, reject)\n  } else {\n    originPush.call(\n      this,\n      location,\n      () => {},\n      () => {}\n    )\n  }\n}\nVueRouter.prototype.replace = function (location, resolve, reject) {\n  if (resolve && reject) {\n    originReplace.call(this, location, resolve, reject)\n  } else {\n    originReplace.call(\n      this,\n      location,\n      () => {},\n      () => {}\n    )\n  }\n}\n\n//配置路由\nlet router = new VueRouter({\n  //配置路由\n  routes,\n  scrollBehavior(to, from, savedPosition) {\n    // return 期望滚动到哪个的位置\n    //代表滚动条在最上方\n    return { y: 0 }\n  },\n})\n\n//全局守卫 前置守卫 在路由跳转之间进行判断\nrouter.beforeEach((to, from, next) => {\n  //to 可以获取到你要跳到哪的信息\n  //from 获取到你从哪个路由而来的信息\n  //next 放行函数\n  //next()\n  //用户登录了，才会有token，未登录一定不会有token\n  let token = store.state.user.token\n  if (token) {\n    //用户已经登录了还想去login\n    if (to.path == '/login') {\n      next('/home')\n    } else {\n      //登陆了去的不是login\n      next()\n    }\n  }\n})\n\nexport default router\n"],"mappings":"AAAA;AACA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,MAAM,MAAM,UAAU;AAC7B;AACA,OAAOC,KAAK,MAAM,SAAS;AAC3B;AACAH,GAAG,CAACI,GAAG,CAACH,SAAS,CAAC;;AAElB;AACA,IAAII,UAAU,GAAGJ,SAAS,CAACK,SAAS,CAACC,IAAI;AACzC,IAAIC,aAAa,GAAGP,SAAS,CAACK,SAAS,CAACG,OAAO;;AAE/C;AACAR,SAAS,CAACK,SAAS,CAACC,IAAI,GAAG,UAAUG,QAAQ,EAAEC,OAAO,EAAEC,MAAM,EAAE;EAC9D,IAAID,OAAO,IAAIC,MAAM,EAAE;IACrBP,UAAU,CAACQ,IAAI,CAAC,IAAI,EAAEH,QAAQ,EAAEC,OAAO,EAAEC,MAAM,CAAC;EAClD,CAAC,MAAM;IACLP,UAAU,CAACQ,IAAI,CACb,IAAI,EACJH,QAAQ,EACR,MAAM,CAAC,CAAC,EACR,MAAM,CAAC,CACT,CAAC;EACH;AACF,CAAC;AACDT,SAAS,CAACK,SAAS,CAACG,OAAO,GAAG,UAAUC,QAAQ,EAAEC,OAAO,EAAEC,MAAM,EAAE;EACjE,IAAID,OAAO,IAAIC,MAAM,EAAE;IACrBJ,aAAa,CAACK,IAAI,CAAC,IAAI,EAAEH,QAAQ,EAAEC,OAAO,EAAEC,MAAM,CAAC;EACrD,CAAC,MAAM;IACLJ,aAAa,CAACK,IAAI,CAChB,IAAI,EACJH,QAAQ,EACR,MAAM,CAAC,CAAC,EACR,MAAM,CAAC,CACT,CAAC;EACH;AACF,CAAC;;AAED;AACA,IAAII,MAAM,GAAG,IAAIb,SAAS,CAAC;EACzB;EACAC,MAAM;EACNa,cAAcA,CAACC,EAAE,EAAEC,IAAI,EAAEC,aAAa,EAAE;IACtC;IACA;IACA,OAAO;MAAEC,CAAC,EAAE;IAAE,CAAC;EACjB;AACF,CAAC,CAAC;;AAEF;AACAL,MAAM,CAACM,UAAU,CAAC,CAACJ,EAAE,EAAEC,IAAI,EAAEI,IAAI,KAAK;EACpC;EACA;EACA;EACA;EACA;EACA,IAAIC,KAAK,GAAGnB,KAAK,CAACoB,KAAK,CAACC,IAAI,CAACF,KAAK;EAClC,IAAIA,KAAK,EAAE;IACT;IACA,IAAIN,EAAE,CAACS,IAAI,IAAI,QAAQ,EAAE;MACvBJ,IAAI,CAAC,OAAO,CAAC;IACf,CAAC,MAAM;MACL;MACAA,IAAI,CAAC,CAAC;IACR;EACF;AACF,CAAC,CAAC;AAEF,eAAeP,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}