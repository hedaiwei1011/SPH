{"ast":null,"code":"//登陆注册模块\nimport { reqGetCode, reqRegister, reqUserLogin, reqUserInfo, reqLogout } from '@/api';\nimport { setToken, getToken, removeToken } from '@/utils/token';\nconst state = {\n  code: '',\n  token: getToken(),\n  userInfo: {}\n};\nconst mutations = {\n  GETCODE(state, code) {\n    state.code = code;\n  },\n  USERLOFIN(state, token) {\n    state.token = token;\n  },\n  GETUESRINFO(state, userInfo) {\n    state.userInfo = userInfo;\n  },\n  CLEAR(state) {\n    state.token = '';\n    state.user = {};\n    removeToken();\n  }\n};\nconst actions = {\n  //获取验证码\n  async getCode({\n    commit\n  }, phone) {\n    //获取验证码的接口 把验证码返回，正常情况是发到用户手机上\n    let result = await reqGetCode(phone);\n    //console.log(result)\n    if (result.code == 200) {\n      commit('GETCODE', result.data);\n      return 'ok';\n    } else {\n      return Promise.reject(new Error('faile'));\n    }\n  },\n  //用户注册\n  async userRegister({\n    commit\n  }, user) {\n    let result = await reqRegister(user);\n    //console.log(result)\n    if (result.code == 200) {\n      return 'ok';\n    } else {\n      return Promise.reject(new Error('faile'));\n    }\n  },\n  //登陆 token--用户唯一标识符\n  async userLogin({\n    commit\n  }, data) {\n    let result = await reqUserLogin(data);\n    //console.log(result)\n    if (result.code == 200) {\n      //用户已经登陆，并且获得到了token\n      commit('USERLOFIN', result.data.token);\n      //持久化存储token\n      //localStorage.setItem('TOKEN',result.data.token)\n      setToken(result.data.token);\n      return 'ok';\n    } else {\n      return Promise.reject(new Error('faile'));\n    }\n  },\n  //获取用户信息\n  async getUserInfo({\n    commit\n  }) {\n    let result = await reqUserInfo();\n    //console.log(result)\n    if (result.code) {\n      commit('GETUESRINFO', result.data);\n      return 'ok';\n    } else {\n      return Promise.reject(new Error('faile'));\n    }\n  },\n  //退出登陆\n  async userLogout({\n    commit\n  }) {\n    //向服务器\n    let result = await reqLogout();\n    if (result.code == 200) {\n      commit('CLEAR');\n    }\n  }\n};\nconst getters = {};\nexport default {\n  state,\n  mutations,\n  actions,\n  getters\n};","map":{"version":3,"names":["reqGetCode","reqRegister","reqUserLogin","reqUserInfo","reqLogout","setToken","getToken","removeToken","state","code","token","userInfo","mutations","GETCODE","USERLOFIN","GETUESRINFO","CLEAR","user","actions","getCode","commit","phone","result","data","Promise","reject","Error","userRegister","userLogin","getUserInfo","userLogout","getters"],"sources":["/Users/hedaiwei/Desktop/project-SPH/app/src/store/user/index.js"],"sourcesContent":["//登陆注册模块\nimport {\n  reqGetCode,\n  reqRegister,\n  reqUserLogin,\n  reqUserInfo,\n  reqLogout,\n} from '@/api'\nimport { setToken, getToken, removeToken } from '@/utils/token'\nconst state = {\n  code: '',\n  token: getToken(),\n  userInfo: {},\n}\nconst mutations = {\n  GETCODE(state, code) {\n    state.code = code\n  },\n  USERLOFIN(state, token) {\n    state.token = token\n  },\n  GETUESRINFO(state, userInfo) {\n    state.userInfo = userInfo\n  },\n  CLEAR(state) {\n    state.token = ''\n    state.user = {}\n    removeToken()\n  },\n}\nconst actions = {\n  //获取验证码\n  async getCode({ commit }, phone) {\n    //获取验证码的接口 把验证码返回，正常情况是发到用户手机上\n    let result = await reqGetCode(phone)\n    //console.log(result)\n    if (result.code == 200) {\n      commit('GETCODE', result.data)\n      return 'ok'\n    } else {\n      return Promise.reject(new Error('faile'))\n    }\n  },\n  //用户注册\n  async userRegister({ commit }, user) {\n    let result = await reqRegister(user)\n    //console.log(result)\n    if (result.code == 200) {\n      return 'ok'\n    } else {\n      return Promise.reject(new Error('faile'))\n    }\n  },\n  //登陆 token--用户唯一标识符\n  async userLogin({ commit }, data) {\n    let result = await reqUserLogin(data)\n    //console.log(result)\n    if (result.code == 200) {\n      //用户已经登陆，并且获得到了token\n      commit('USERLOFIN', result.data.token)\n      //持久化存储token\n      //localStorage.setItem('TOKEN',result.data.token)\n      setToken(result.data.token)\n      return 'ok'\n    } else {\n      return Promise.reject(new Error('faile'))\n    }\n  },\n  //获取用户信息\n  async getUserInfo({ commit }) {\n    let result = await reqUserInfo()\n    //console.log(result)\n    if (result.code) {\n      commit('GETUESRINFO', result.data)\n      return 'ok'\n    } else {\n      return Promise.reject(new Error('faile'))\n    }\n  },\n  //退出登陆\n  async userLogout({ commit }) {\n    //向服务器\n    let result = await reqLogout()\n    if (result.code == 200) {\n      commit('CLEAR')\n    }\n  },\n}\nconst getters = {}\n\nexport default {\n  state,\n  mutations,\n  actions,\n  getters,\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}